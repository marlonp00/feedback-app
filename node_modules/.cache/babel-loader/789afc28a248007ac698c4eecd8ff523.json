{"ast":null,"code":"import _slicedToArray from\"/Volumes/LaCie/LacCie_weiss/01_daten/04_dev_apps/feedback-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useContext,useEffect}from\"react\";import Card from\"./shared/Card\";import Button from\"./shared/Button\";import RatingSelect from\"./RatingSelect\";import FeedbackContext from\"../context/FeedbackContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function FeedbackForm(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),text=_useState2[0],setText=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),btnDisabled=_useState4[0],setBtnDisabled=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),message=_useState6[0],setMessage=_useState6[1];var _useState7=useState(10),_useState8=_slicedToArray(_useState7,2),rating=_useState8[0],setRating=_useState8[1];var _useContext=useContext(FeedbackContext),addFeedback=_useContext.addFeedback,feedbackEdit=_useContext.feedbackEdit,updateFeedback=_useContext.updateFeedback;useEffect(function(){if(feedbackEdit.edit===true){setBtnDisabled(false);setText(feedbackEdit.item.text);setRating(feedbackEdit.item.rating);}},[feedbackEdit]);var handleTextChange=function handleTextChange(e){if(text===''){setBtnDisabled(true);setMessage(null);}else if(text!==''&&text.trim().length<=10){setBtnDisabled(true);setMessage('Text must be at least 10 characters');}else{setBtnDisabled(false);setMessage(null);}setText(e.target.value);};var handleSubmit=function handleSubmit(e){e.preventDefault();if(text.trim().length>10){var newFeedback={text:text,rating:rating};if(feedbackEdit.edit===true){updateFeedback(feedbackEdit.item.id,newFeedback);}else{addFeedback(newFeedback);}setText('');}};return/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"How would you rate your service with us?\"}),/*#__PURE__*/_jsx(RatingSelect,{select:function select(rating){return setRating(rating);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:handleTextChange,placeholder:\"Write a review\",value:text}),/*#__PURE__*/_jsx(Button,{type:\"submit\",isDisabled:btnDisabled,children:\"send\"})]}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"message\",children:message})]})});}export default FeedbackForm;","map":{"version":3,"sources":["/Volumes/LaCie/LacCie_weiss/01_daten/04_dev_apps/feedback-app/src/components/FeedbackForm.jsx"],"names":["useState","useContext","useEffect","Card","Button","RatingSelect","FeedbackContext","FeedbackForm","text","setText","btnDisabled","setBtnDisabled","message","setMessage","rating","setRating","addFeedback","feedbackEdit","updateFeedback","edit","item","handleTextChange","e","trim","length","target","value","handleSubmit","preventDefault","newFeedback","id"],"mappings":"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","sourcesContent":["import { useState, useContext, useEffect } from \"react\"\nimport Card from \"./shared/Card\"\nimport Button from \"./shared/Button\";\nimport RatingSelect from \"./RatingSelect\";\nimport FeedbackContext from \"../context/FeedbackContext\";\n\n\nfunction FeedbackForm() {\n\n    const [text, setText] = useState('');\n    const [btnDisabled, setBtnDisabled] = useState(true);\n    const [message, setMessage] = useState('');\n    const [rating, setRating] = useState(10);\n\n    const {addFeedback, feedbackEdit, updateFeedback} = useContext(FeedbackContext)\n\n    useEffect(() => {\n            if(feedbackEdit.edit === true) {\n                setBtnDisabled(false)\n                setText(feedbackEdit.item.text)\n                setRating(feedbackEdit.item.rating)\n            }\n        }, [feedbackEdit]\n    );\n\n    const handleTextChange = (e) => {\n        if(text === '') {\n            setBtnDisabled(true);\n            setMessage(null);\n        } else if(text !== '' && text.trim().length <= 10) {\n            setBtnDisabled(true);\n            setMessage('Text must be at least 10 characters');\n        } else {\n            setBtnDisabled(false);\n            setMessage(null);\n        }\n\n        setText(e.target.value);\n    }\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n        \n        if(text.trim().length > 10) {\n            const newFeedback = {\n                text: text,\n                rating: rating\n            }\n            \n            if(feedbackEdit.edit === true) {\n                updateFeedback(feedbackEdit.item.id, newFeedback)\n                } else {\n                    addFeedback(newFeedback);\n                }\n            \n                setText('');\n        }\n    }\n\n    return (\n        <Card>\n           <form onSubmit={handleSubmit}> \n               <h2>How would you rate your service with us?</h2>\n          <RatingSelect select={(rating) => setRating(rating)} />\n           <div className=\"input-group\">\n               <input type=\"text\" onChange={handleTextChange} placeholder=\"Write a review\" value={text} />\n               <Button type=\"submit\" isDisabled={btnDisabled}>send</Button>\n           </div>\n\n           { message && <div className=\"message\">{message}</div> }\n           </form> \n        </Card>\n    )\n}\n\nexport default FeedbackForm\n"]},"metadata":{},"sourceType":"module"}